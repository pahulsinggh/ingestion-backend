spring.application.name=ingestion-backend

# --- Server ---
server.port=8080

# --- Kafka (env-first, with safe local fallbacks) ---
# Will use SPRING_KAFKA_BOOTSTRAP_SERVERS if present; otherwise localhost for dev.
spring.kafka.bootstrap-servers=${SPRING_KAFKA_BOOTSTRAP_SERVERS:localhost:9092}

# Core producer settings
spring.kafka.producer.acks=all
spring.kafka.producer.properties.enable.idempotence=true
spring.kafka.producer.properties.max.in.flight.requests.per.connection=5
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.ByteArraySerializer

# Confluent Cloud auth (these env vars are set by Terraform on App Runner)
# If you run locally against localhost, just leave these unset.
spring.kafka.properties.security.protocol=${SPRING_KAFKA_PROPERTIES_SECURITY_PROTOCOL:}
spring.kafka.properties.sasl.mechanism=${SPRING_KAFKA_PROPERTIES_SASL_MECHANISM:}
spring.kafka.properties.sasl.jaas.config=${SPRING_KAFKA_PROPERTIES_SASL_JAAS_CONFIG:}

# --- Actuator ---
management.endpoints.web.exposure.include=health,info

# --- App settings ---
# Topic is also env-first so we can change it per env without code changes.
ingest.topic=${INGEST_TOPIC:ingestion-events}
